{% extends '_base.html' %}
{% block title %}EPICS{% endblock title %}
{% block head %}{% endblock head %}
{% block extra_css %}{% endblock extra_css %}
{% block extra_js %}{% endblock extra_js %}
{% block content %}

<div class="overflow-hidden w-full overflow-x-auto rounded-md border border-neutral-300 dark:border-neutral-700">
    <table class="w-full text-left text-sm text-neutral-600 dark:text-neutral-300">
        <thead
            class="border-b border-neutral-300 bg-neutral-50 text-sm text-neutral-900 dark:border-neutral-700 dark:bg-neutral-900 dark:text-white">
            {% if epics %}
            <tr>
                <th scope="col" class="p-4">Name</th>
                <th scope="col" class="p-4">Status</th>
                <th scope="col" class="p-4">Priority</th>
                <th scope="col" class="p-4">Issues</th>
                <th scope="col" class="p-4">Completed At</th>
                {% for epic in epics %}
                {% if user == epic.created_by %}
                <th scope="col" class="p-4">Actions</th>
                {% endif %}
                {% endfor %}
            </tr>
            {% else %}
            <tr>
                <th scope="col" class="p-4">No Epics</th>
            </tr>
            {% endif %}
        </thead>
        <tbody class="divide-y divide-neutral-300 dark:divide-neutral-700">
            {% for epic in epics %}
            <tr>
                <td class="p-4">{{ epic }}</td>
                <td class="p-4"><span
                        class="inline-flex overflow-hidden rounded-md border px-1 py-0.5 text-xs font-medium {% if epic.status == 'TO_DO' %} border-green-500 text-green-500 bg-green-500/10 {% elif epic.status == 'IN_PROGRESS' %} border-blue-500 text-blue-500 bg-blue-500/10 {% elif epic.status == 'IN_REVIEW' %} border-orange-500 text-orange-500 bg-orange-500/10 {% elif epic.status == 'COMPLETED' %} border-red-500 text-red-500 bg-red-500/10 {% else %} border-neutral-500 text-neutral-500 bg-neutral-500/10 {% endif %}">{% if epic.status == 'TO_DO' %}TO
                        DO {% elif epic.status == 'IN_PROGRESS' %} IN PROGRESS
                        {% elif epic.status == 'IN_REVIEW' %} IN REVIEW
                        {% elif epic.status == 'COMPLETED' %}
                        COMPLETED {% else %} BLOCKED {% endif %}</span>
                </td>
                <td class="p-4"><span
                        class="inline-flex overflow-hidden rounded-md border px-1 py-0.5 text-xs font-medium {% if member.priority == 'member' %} border-green-500 text-green-500 bg-green-500/10 {% elif member.priority == 'reviewer' %} border-blue-500 text-blue-500 bg-blue-500/10 {% else %} border-red-500 text-red-500 bg-red-500/10 {% endif %}">{% if member.priority == 'member' %}Member{% elif member.priority == 'reviewer' %}Reviewer{% else %}Guest{% endif %}</span>
                </td>
                <td class="p-4">{{ epic.issues.all|length }}</td>
                <td class="p-4">{{ epic.completed_at }}</td>

                <td class="p-4"><a href="{{ epic.get_absolute_url }}"
                        class="cursor-pointer whitespace-nowrap rounded-md bg-transparent p-0.5 font-semibold text-black outline-black hover:opacity-75 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 active:opacity-100 active:outline-offset-0 dark:text-white dark:outline-white">View</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock content %}
{% block extra_scripts %}{% endblock extra_scripts %}