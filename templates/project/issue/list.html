{% extends '_base.html' %}
{% block title %}My Projects{% endblock title %}
{% block head %}{% endblock head %}
{% block extra_css %}{% endblock extra_css %}
{% block extra_js %}{% endblock extra_js %}
{% block content %}

<div x-data="{ selectedTab: 'my_issues' }" class="w-full">
    <div @keydown.right.prevent="$focus.wrap().next()" @keydown.left.prevent="$focus.wrap().previous()"
        class="flex gap-2 overflow-x-auto border-b border-neutral-300 dark:border-neutral-700" role="tablist"
        aria-label="tab options">


        <button @click="selectedTab = 'my_issues'" :aria-selected="selectedTab === 'my_issues'"
            :tabindex="selectedTab === 'my_issues' ? '0' : '-1'"
            :class="selectedTab === 'my_issues' ? 'font-bold text-black border-b-2 border-black dark:border-white dark:text-white' : 'text-neutral-600 font-medium dark:text-neutral-300 dark:hover:border-b-neutral-300 dark:hover:text-white hover:border-b-2 hover:border-b-neutral-800 hover:text-neutral-900'"
            class="flex h-min items-center gap-2 px-4 py-2 text-sm" type="button" role="tab"
            aria-controls="tabpanelGroups">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"
                class="size-4">
                <path
                    d="M10 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM6 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM1.49 15.326a.78.78 0 0 1-.358-.442 3 3 0 0 1 4.308-3.516 6.484 6.484 0 0 0-1.905 3.959c-.023.222-.014.442.025.654a4.97 4.97 0 0 1-2.07-.655ZM16.44 15.98a4.97 4.97 0 0 0 2.07-.654.78.78 0 0 0 .357-.442 3 3 0 0 0-4.308-3.517 6.484 6.484 0 0 1 1.907 3.96 2.32 2.32 0 0 1-.026.654ZM18 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM5.304 16.19a.844.844 0 0 1-.277-.71 5 5 0 0 1 9.947 0 .843.843 0 0 1-.277.71A6.975 6.975 0 0 1 10 18a6.974 6.974 0 0 1-4.696-1.81Z" />
            </svg>
            My Issues
            <span
                :class="selectedTab === 'my_issues' ? 'border-black bg-black/10 dark:bg-white dark:border-white dark:text-black' : 'border-neutral-300 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-900'"
                class="text-xs font-medium px-1 rounded-full border">{{ user.issues_created.all|length }}</span>
        </button>


        <button @click="selectedTab = 'assigned'" :aria-selected="selectedTab === 'assigned'"
            :tabindex="selectedTab === 'assigned' ? '0' : '-1'"
            :class="selectedTab === 'assigned' ? 'font-bold text-black border-b-2 border-black dark:border-white dark:text-white' : 'text-neutral-600 font-medium dark:text-neutral-300 dark:hover:border-b-neutral-300 dark:hover:text-white hover:border-b-2 hover:border-b-neutral-800 hover:text-neutral-900'"
            class="flex h-min items-center gap-2 px-4 py-2 text-sm" type="button" role="tab"
            aria-controls="tabpanelLikes">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"
                class="size-4">
                <path
                    d="m9.653 16.915-.005-.003-.019-.01a20.759 20.759 0 0 1-1.162-.682 22.045 22.045 0 0 1-2.582-1.9C4.045 12.733 2 10.352 2 7.5a4.5 4.5 0 0 1 8-2.828A4.5 4.5 0 0 1 18 7.5c0 2.852-2.044 5.233-3.885 6.82a22.049 22.049 0 0 1-3.744 2.582l-.019.01-.005.003h-.002a.739.739 0 0 1-.69.001l-.002-.001Z" />
            </svg>
            Assigned
            <span
                :class="selectedTab === 'assigned' ? 'border-black bg-black/10 dark:bg-white dark:border-white dark:text-black' : 'border-neutral-300 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-900'"
                class="text-xs border font-medium px-1 rounded-full">{{ user.assigned_issues.all|length }}</span>
        </button>
        <button @click="selectedTab = 'comments'" :aria-selected="selectedTab === 'comments'"
            :tabindex="selectedTab === 'comments' ? '0' : '-1'"
            :class="selectedTab === 'comments' ? 'font-bold text-black border-b-2 border-black dark:border-white dark:text-white' : 'text-neutral-600 font-medium dark:text-neutral-300 dark:hover:border-b-neutral-300 dark:hover:text-white hover:border-b-2 hover:border-b-neutral-800 hover:text-neutral-900'"
            class="flex h-min items-center gap-2 px-4 py-2 text-sm" type="button" role="tab"
            aria-controls="tabpanelComments">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"
                class="size-4">
                <path
                    d="M3.505 2.365A41.369 41.369 0 0 1 9 2c1.863 0 3.697.124 5.495.365 1.247.167 2.18 1.108 2.435 2.268a4.45 4.45 0 0 0-.577-.069 43.141 43.141 0 0 0-4.706 0C9.229 4.696 7.5 6.727 7.5 8.998v2.24c0 1.413.67 2.735 1.76 3.562l-2.98 2.98A.75.75 0 0 1 5 17.25v-3.443c-.501-.048-1-.106-1.495-.172C2.033 13.438 1 12.162 1 10.72V5.28c0-1.441 1.033-2.717 2.505-2.914Z" />
                <path
                    d="M14 6c-.762 0-1.52.02-2.271.062C10.157 6.148 9 7.472 9 8.998v2.24c0 1.519 1.147 2.839 2.71 2.935.214.013.428.024.642.034.2.009.385.09.518.224l2.35 2.35a.75.75 0 0 0 1.28-.531v-2.07c1.453-.195 2.5-1.463 2.5-2.915V8.998c0-1.526-1.157-2.85-2.729-2.936A41.645 41.645 0 0 0 14 6Z" />
            </svg>
            Comments
            <span
                :class="selectedTab === 'comments' ? 'border-black bg-black/10 dark:bg-white dark:border-white dark:text-black' : 'border-neutral-300 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-900'"
                class="text-xs font-medium px-1 rounded-full border">243</span>
        </button>


        <button @click="selectedTab = 'saved'" :aria-selected="selectedTab === 'saved'"
            :tabindex="selectedTab === 'saved' ? '0' : '-1'"
            :class="selectedTab === 'saved' ? 'font-bold text-black border-b-2 border-black dark:border-white dark:text-white' : 'text-neutral-600 font-medium dark:text-neutral-300 dark:hover:border-b-neutral-300 dark:hover:text-white hover:border-b-2 hover:border-b-neutral-800 hover:text-neutral-900'"
            class="flex h-min items-center gap-2 px-4 py-2 text-sm" type="button" role="tab"
            aria-controls="tabpanelSaved">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"
                class="size-4">
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M10 2c-1.716 0-3.408.106-5.07.31C3.806 2.45 3 3.414 3 4.517V17.25a.75.75 0 0 0 1.075.676L10 15.082l5.925 2.844A.75.75 0 0 0 17 17.25V4.517c0-1.103-.806-2.068-1.93-2.207A41.403 41.403 0 0 0 10 2Z" />
            </svg>
            Saved
            <span
                :class="selectedTab === 'saved' ? 'border-black bg-black/10 dark:bg-white dark:border-white dark:text-black' : 'border-neutral-300 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-900'"
                class="text-xs font-medium px-1 rounded-full border">32</span>
        </button>
    </div>


    <div class="px-2 py-4 text-neutral-600 dark:text-neutral-300">

        <!-- My issues -->
        <div x-show="selectedTab === 'my_issues'" id="tabpanelGroups" role="tabpanel" aria-label="my_issues">
            <div
                class="overflow-hidden w-full overflow-x-auto rounded-md border border-neutral-300 dark:border-neutral-700">
                <table class="w-full text-left text-sm text-neutral-600 dark:text-neutral-300">
                    <thead
                        class="border-b border-neutral-300 bg-neutral-50 text-sm text-neutral-900 dark:border-neutral-700 dark:bg-neutral-900 dark:text-white">
                        <tr>
                            <th scope="col" class="p-4">Title</th>
                            <th scope="col" class="p-4">Priority</th>
                            <th scope="col" class="p-4">Sprint</th>
                            <th scope="col" class="p-4">Due Date</th>
                            <th scope="col" class="p-4">Status</th>
                            <th scope="col" class="p-4">Action</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-neutral-300 dark:divide-neutral-700">
                        {% for issue in issues %}
                        {% if issue.created_by == user%}
                        <tr>
                            <td class="p-4">
                                <div class="flex w-max items-center gap-2">
                                    <img class="size-10 rounded-full object-cover"
                                        src="https://penguinui.s3.amazonaws.com/component-assets/avatar-8.webp"
                                        alt="user avatar" />
                                    <div class="flex flex-col">
                                        <span class="text-neutral-900 dark:text-white">{{ issue }}</span>
                                        <span
                                            class="text-sm text-neutral-600 opacity-85 dark:text-neutral-300">{{ issue.type }}</span>
                                    </div>
                                </div>
                            </td>
                            <td class="p-4">{{ issue.priority }}</td>
                            <td class="p-4">{{ issue.due_date|date }}</td>
                            <td class="p-4">{{ issue.end_date|date }}</td>
                            <td class="p-4"><span
                                    class="inline-flex overflow-hidden rounded-md border px-1 py-0.5 text-xs font-medium {% if issue.status == 'TO_DO' %} border-green-500 text-green-500 bg-green-500/10 {% elif issue.status == 'IN_PROGRESS' %} border-blue-500 text-blue-500 bg-blue-500/10 {% elif issue.status == 'IN_REVIEW' %} border-orange-500 text-orange-500 bg-orange-500/10 {% elif issue.status == 'COMPLETED' %} border-red-500 text-red-500 bg-red-500/10 {% else %} border-neutral-500 text-neutral-500 bg-neutral-500/10 {% endif %}">{% if issue.status == 'TO_DO' %}TO
                                    DO {% elif issue.status == 'IN_PROGRESS' %} IN PROGRESS
                                    {% elif issue.status == 'IN_REVIEW' %} IN REVIEW
                                    {% elif issue.status == 'COMPLETED' %}
                                    COMPLETED {% else %} BLOCKED {% endif %}</span>
                            </td>
                            <td class="p-4"><button type="button"
                                    class="cursor-pointer whitespace-nowrap rounded-md bg-transparent p-0.5 font-semibold text-black outline-black hover:opacity-75 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 active:opacity-100 active:outline-offset-0 dark:text-white dark:outline-white">Edit</button>

                            </td>
                        </tr>
                        {% endif %}
                        {% endfor %}
                    </tbody>
                </table>
            </div>

        </div>
        <!-- My issues end -->


        <!-- Assigned issues -->
        <div x-show="selectedTab === 'assigned'" id="tabpanelLikes" role="tabpanel" aria-label="assigned">
            <div
                class="overflow-hidden w-full overflow-x-auto rounded-md border border-neutral-300 dark:border-neutral-700">
                <table class="w-full text-left text-sm text-neutral-600 dark:text-neutral-300">
                    <thead
                        class="border-b border-neutral-300 bg-neutral-50 text-sm text-neutral-900 dark:border-neutral-700 dark:bg-neutral-900 dark:text-white">
                        <tr>
                            <th scope="col" class="p-4">Title</th>
                            <th scope="col" class="p-4">Priority</th>
                            <th scope="col" class="p-4">Sprint</th>
                            <th scope="col" class="p-4">Due Date</th>
                            <th scope="col" class="p-4">Status</th>
                            <th scope="col" class="p-4">Assigned By</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-neutral-300 dark:divide-neutral-700">
                        {% for issue in issues %}
                        {% if issue.created_by == user%}
                        <tr>
                            <td class="p-4">
                                <div class="flex w-max items-center gap-2">
                                    <img class="size-10 rounded-full object-cover"
                                        src="https://penguinui.s3.amazonaws.com/component-assets/avatar-8.webp"
                                        alt="user avatar" />
                                    <div class="flex flex-col">
                                        <span class="text-neutral-900 dark:text-white">{{ issue }}</span>
                                        <span
                                            class="text-sm text-neutral-600 opacity-85 dark:text-neutral-300">{{ issue.type }}</span>
                                    </div>
                                </div>
                            </td>
                            <td class="p-4">{{ issue.priority }}</td>
                            <td class="p-4">{{ issue.sprint }}</td>
                            <td class="p-4">{{ issue.end_date|date }}</td>
                            <td class="p-4"><span
                                    class="inline-flex overflow-hidden rounded-md border px-1 py-0.5 text-xs font-medium {% if issue.status == 'TO_DO' %} border-green-500 text-green-500 bg-green-500/10 {% elif issue.status == 'IN_PROGRESS' %} border-blue-500 text-blue-500 bg-blue-500/10 {% elif issue.status == 'IN_REVIEW' %} border-orange-500 text-orange-500 bg-orange-500/10 {% elif issue.status == 'COMPLETED' %} border-red-500 text-red-500 bg-red-500/10 {% else %} border-neutral-500 text-neutral-500 bg-neutral-500/10 {% endif %}">{% if issue.status == 'TO_DO' %}TO
                                    DO {% elif issue.status == 'IN_PROGRESS' %} IN PROGRESS
                                    {% elif issue.status == 'IN_REVIEW' %} IN REVIEW
                                    {% elif issue.status == 'COMPLETED' %}
                                    COMPLETED {% else %} BLOCKED {% endif %}</span>
                            </td>
                            <td class="p-4">{{ issue.created_by }}</td>
                        </tr>
                        {% endif %}
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Assigned issues end -->


        <!-- Tab -->
        <div x-show="selectedTab === 'comments'" id="tabpanelComments" role="tabpanel" aria-label="comments">
            <div
                class="overflow-hidden w-full overflow-x-auto rounded-md border border-neutral-300 dark:border-neutral-700">
                <table class="w-full text-left text-sm text-neutral-600 dark:text-neutral-300">
                    <thead
                        class="border-b border-neutral-300 bg-neutral-50 text-sm text-neutral-900 dark:border-neutral-700 dark:bg-neutral-900 dark:text-white">
                        <tr>
                            <th scope="col" class="p-4">User</th>
                            <th scope="col" class="p-4">ID</th>
                            <th scope="col" class="p-4">Member Since</th>
                            <th scope="col" class="p-4">Status</th>
                            <th scope="col" class="p-4">Action</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-neutral-300 dark:divide-neutral-700">
                        <tr>
                            <td class="p-4">
                                <div class="flex w-max items-center gap-2">
                                    <img class="size-10 rounded-full object-cover"
                                        src="https://penguinui.s3.amazonaws.com/component-assets/avatar-8.webp"
                                        alt="user avatar" />
                                    <div class="flex flex-col">
                                        <span class="text-neutral-900 dark:text-white">Alice Brown</span>
                                        <span
                                            class="text-sm text-neutral-600 opacity-85 dark:text-neutral-300">alice.brown@gmail.com</span>
                                    </div>
                                </div>
                            </td>
                            <td class="p-4">2335</td>
                            <td class="p-4">Nov 14, 2021</td>
                            <td class="p-4"><span
                                    class="inline-flex overflow-hidden rounded-md border border-green-500 px-1 py-0.5 text-xs font-medium text-green-500 bg-green-500/10">Active</span>
                            </td>
                            <td class="p-4"><button type="button"
                                    class="cursor-pointer whitespace-nowrap rounded-md bg-transparent p-0.5 font-semibold text-black outline-black hover:opacity-75 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 active:opacity-100 active:outline-offset-0 dark:text-white dark:outline-white">Edit</button>
                            </td>
                        </tr>

                    </tbody>
                </table>
            </div>

        </div>
        <div x-show="selectedTab === 'saved'" id="tabpanelSaved" role="tabpanel" aria-label="saved"><b><a href="#"
                    class="underline">Saved</a></b> tab is selected</div>
    </div>
</div>
{% endblock content %}

{% block extra_scripts %}{% endblock extra_scripts %}